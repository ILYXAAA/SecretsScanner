<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú—É–ª—å—Ç–∏—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ - Secrets Scanner</title>
    <link rel="stylesheet" href="/secret_scanner/static/css/multi_scan.css">
    <link rel="icon" type="image/x-icon" href="/secret_scanner/favicon.ico">
</head>
<body>
    <header class="header">
        <a href="/secret_scanner/dashboard" class="logo">
            üîç Secrets Scanner
        </a>
        <nav class="nav-links">
            <a href="/secret_scanner/dashboard">üåê –ì–ª–∞–≤–Ω–∞—è</a>
            <a href="/secret_scanner/multi-scan">üîÑ –ú—É–ª—å—Ç–∏—Å–∫–∞–Ω</a>
            {% if current_user == "admin" %}
                <a href="/secret_scanner/admin">üëë –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a>
                <a href="/secret_scanner/admin/workers" class="active">‚öôÔ∏è –°–µ—Ä–≤–∏—Å</a>
            {% endif %}
            <a href="/secret_scanner/settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
            <a href="/secret_scanner/logout">üîö –í—ã–π—Ç–∏</a>
        </nav>
    </header>
    
    <div class="container">
        <div class="page-header">
            <h1 class="page-title">üîÑ –ú—É–ª—å—Ç–∏—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h1>
        </div>
        
        <div id="alertContainer"></div>
        
        <div class="multi-scan-form" id="scanForm">
            <form id="multiScanForm">
                <div class="form-group">
                    <label for="repoUrls">–°—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏</label>
                    <div class="form-description">
                        {% if HUB_TYPE == "Azure" %}
                        –í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ Azure DevOps, –ø–æ –æ–¥–Ω–æ–π –Ω–∞ —Å—Ç—Ä–æ–∫—É.<br>
                        –ï—Å–ª–∏ –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–µ –±—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω –ø—Ä–æ–µ–∫—Ç - –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å.<br><br>
                        –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:<br>
                        ‚Ä¢ <strong>–í–µ—Ç–∫–∞:</strong> http://server/collection/project/_git/repo<span style="color: #3b82f6;">?version=GBmain</span><br>
                        ‚Ä¢ <strong>–¢–µ–≥:</strong> http://server/collection/project/_git/repo<span style="color: #3b82f6;">?version=GTv1.0.0</span><br>
                        ‚Ä¢ <strong>–ö–æ–º–º–∏—Ç:</strong> http://server/collection/project/_git/repo<span style="color: #3b82f6;">?version=GCabc123def456</span><br>
                        ‚Ä¢ <strong>–ö–æ–º–º–∏—Ç (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç):</strong> http://server/collection/project/_git/repo<span style="color: #3b82f6;">/commit/abc123def456</span><br>
                        <br>‚ö†Ô∏è <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ DevZone –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –º—É–ª—å—Ç–∏—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º<br>
                        {% else %}
                        –í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ Git, –ø–æ –æ–¥–Ω–æ–π –Ω–∞ —Å—Ç—Ä–æ–∫—É.<br>
                        –ï—Å–ª–∏ –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–µ –±—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω –ø—Ä–æ–µ–∫—Ç - –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å.<br><br>
                        –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:<br>
                        ‚Ä¢ <strong>–ö–æ–º–º–∏—Ç:</strong> https://github.com/owner/repo<span style="color: #3b82f6;">/commit/abc123def456</span><br>
                        ‚Ä¢ <strong>–í–µ—Ç–∫–∞:</strong> https://github.com/owner/repo<span style="color: #3b82f6;">/tree/branch-name</span><br>
                        ‚Ä¢ <strong>–¢–µ–≥:</strong> https://github.com/owner/repo<span style="color: #3b82f6;">/releases/tag/v1.0.0</span><br>
                        {% endif %}
                    </div>
                    <textarea 
                        id="repoUrls" 
                        name="repoUrls" 
                        {% if HUB_TYPE == "Azure" %}
                            placeholder="http://server/collection/project/_git/repo1?version=GBmain&#10;http://server/collection/project/_git/repo2?version=GTv1.0.0&#10;http://server/collection/project/_git/repo3?version=GCabc123def456"
                        {% else %}
                            placeholder="https://github.com/owner/repo1/commit/abc123def456&#10;https://github.com/owner/repo2/tree/main&#10;https://github.com/owner/repo3/releases/tag/v1.0.0"
                        {% endif %}
                        required></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
                    </button>
                </div>
            </form>
        </div>
        
        <div id="scanResults" style="display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="color: #333; margin: 0;">üìä –ó–∞–ø—É—â–µ–Ω–Ω—ã–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <div id="refreshStatus" style="font-size: 0.9rem; color: #666;"></div>
                    <button class="btn btn-secondary" onclick="clearScanResults()">
                        üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                    </button>
                </div>
            </div>
            <div id="scanList" class="scan-list"></div>
        </div>
    </div>

    <div id="completedRepos" style="display: none;">
        <div class="completed-repos">
            <h3>üìã –ü—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏</h3>
            <div class="repo-list" id="repoList"></div>
            <button class="copy-button" onclick="copyRepoList()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫</button>
        </div>
    </div>
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <h3>–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π...</h3>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ. –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 5 –º–∏–Ω—É—Ç.</p>
        </div>
    </div>
    
    <!-- Confirmation Dialog -->
    <div class="confirmation-dialog" id="confirmationDialog">
        <div class="dialog-content">
            <h3 class="dialog-title">–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤</h3>
            <div class="dialog-message" id="dialogMessage"></div>
            <div class="missing-projects-list" id="missingProjectsList"></div>
            <div class="dialog-actions">
                <button class="btn btn-secondary" id="cancelBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" id="confirmBtn">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã</button>
            </div>
        </div>
    </div>
    <script src="/secret_scanner/static/js/multi_scan.js"></script>
</body>
</html>