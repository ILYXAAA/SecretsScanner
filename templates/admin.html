<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Secrets Scanner</title>
    <link rel="stylesheet" href="/secret_scanner/static/css/admin.css">
    <link rel="icon" type="image/x-icon" href="/secret_scanner/favicon.ico">
</head>
<body>
    <header class="header">
        <a href="/secret_scanner/dashboard" class="logo">
            üîç Secrets Scanner
        </a>
        <nav class="nav-links">
            <a href="/secret_scanner/dashboard">üåê –ì–ª–∞–≤–Ω–∞—è</a>
            <a href="/secret_scanner/multi-scan">üîÑ –ú—É–ª—å—Ç–∏—Å–∫–∞–Ω</a>
            <a href="/secret_scanner/admin">üëë –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a>
            <a href="/secret_scanner/admin/workers" class="active">‚öôÔ∏è –°–µ—Ä–≤–∏—Å</a>
            <a href="/secret_scanner/settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
            <a href="/secret_scanner/logout">üîö –í—ã–π—Ç–∏</a>
        </nav>
    </header>
    
    <div class="container">
        <div class="admin-header">
            <h1 class="admin-title">
                <span>üëë</span>
                –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
            </h1>
            <div class="admin-description">
                –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
            </div>
        </div>
        
        {% if request.url.query %}
            {% if 'error=access_denied' in request.url.query %}
            <div class="alert alert-error">–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω. –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.</div>
            {% elif 'error=user_exists' in request.url.query %}
            <div class="alert alert-error">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.</div>
            {% elif 'error=user_creation_failed' in request.url.query %}
            <div class="alert alert-error">–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</div>
            {% elif 'error=user_not_found' in request.url.query %}
            <div class="alert alert-error">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω.</div>
            {% elif 'error=cannot_delete_admin' in request.url.query %}
            <div class="alert alert-error">–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.</div>
            {% elif 'error=user_deletion_failed' in request.url.query %}
            <div class="alert alert-error">–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</div>
            {% elif 'error=secret_key_update_failed' in request.url.query %}
            <div class="alert alert-error">–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å SECRET_KEY.</div>
            {% elif 'success=user_created' in request.url.query %}
            <div class="alert alert-success">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω.</div>
            {% elif 'success=user_deleted' in request.url.query %}
            <div class="alert alert-success">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω.</div>
            {% elif 'success=secret_key_updated' in request.url.query %}
            <div class="alert alert-success">SECRET_KEY —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω. –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –≤—ã—Ö–æ–¥–∏—Ç—å –∏–∑ —Å–∏—Å—Ç–µ–º—ã.</div>
            {% elif 'error=api_token_exists' in request.url.query %}
            <div class="alert alert-error">API —Ç–æ–∫–µ–Ω —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.</div>
            {% elif 'error=api_token_creation_failed' in request.url.query %}
            <div class="alert alert-error">–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å API —Ç–æ–∫–µ–Ω.</div>
            {% elif 'success=api_token_created' in request.url.query %}
            <div class="api-token-display">
                <div class="token-header">
                    üéâ API —Ç–æ–∫–µ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –¥–ª—è –∫–æ–º–∞–Ω–¥—ã "{{ request.query_params.get('token_name', '') }}"
                </div>
                <div class="token-value">
                    {{ request.query_params.get('token', '') }}
                    <button type="button" class="copy-button" onclick="copyToClipboard('{{ request.query_params.get('token', '') }}')">
                        –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                </div>
                <div class="token-warning">
                    ‚ö†Ô∏è –í–∞–∂–Ω–æ: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ. –û–Ω –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
                </div>
            </div>
            {% endif %}
        {% endif %}
        
        <!-- Users Management Section -->
        <div class="section">
            <h2 class="section-title">
                <span>üëÆ</span>
                –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
            </h2>
            
            <div class="form-container">
                <h3 style="margin-bottom: 1rem;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                <form method="post" action="/secret_scanner/admin/create-user">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                            <input type="text" id="username" name="username" required 
                                   pattern="[a-zA-Z0-9._-]+" 
                                   title="–î–æ–ø—É—Å—Ç–∏–º—ã —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, —Ç–æ—á–∫–∏, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è –∏ –¥–µ—Ñ–∏—Å—ã">
                        </div>
                        <div class="form-group">
                            <label for="password">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" id="password" name="password" required minlength="6">
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
                    </div>
                </form>
            </div>
            
            <div style="margin-top: 2rem;">
                <h3 style="margin-bottom: 1rem;">üìã –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                <div style="margin-bottom: 1rem;">
                    <div class="form-group">
                        <label for="userSearch">–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</label>
                        <input type="text" id="userSearch" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è..." 
                            style="width: 100%; padding: 0.75rem; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem;"
                            oninput="searchUsers()">
                    </div>
                </div>
                <div class="loading" id="usersLoading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</div>
                <table class="users-table compact" id="usersTable">
                    <thead>
                        <tr>
                            <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                            <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                            <th>–ó–∞–ø—É—â–µ–Ω–æ —Å–∫–∞–Ω–æ–≤</th>
                            <th>–°–æ–∑–¥–∞–Ω–æ –ø—Ä–æ–µ–∫—Ç–æ–≤</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- Users will be loaded here -->
                    </tbody>
                </table>
                
                <!-- Pagination -->
                <div id="pagination" style="display: none; margin-top: 1rem; text-align: center;">
                    <div style="display: flex; justify-content: center; align-items: center; gap: 0.5rem;">
                        <button type="button" class="btn btn-primary" id="prevPage" onclick="changePage(-1)" style="padding: 0.5rem 1rem;">
                            ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è
                        </button>
                        <span id="pageInfo" style="padding: 0 1rem; font-weight: 600;"></span>
                        <button type="button" class="btn btn-primary" id="nextPage" onclick="changePage(1)" style="padding: 0.5rem 1rem;">
                            –°–ª–µ–¥—É—é—â–∞—è ‚Üí
                        </button>
                    </div>
                    <div id="totalInfo" style="margin-top: 0.5rem; color: #666; font-size: 0.9rem;"></div>
                </div>
            </div>
        </div>
        
        <!-- Secret Key Management Section -->
        <div class="section">
            <h2 class="section-title">
                <span>üîë</span>
                –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SECRET_KEY
            </h2>
            
            <div>
                <h3 style="margin-bottom: 1rem;">üîê –¢–µ–∫—É—â–∏–π SECRET_KEY</h3>
                <div class="current-key">
                    {{ current_secret_key }}
                </div>
                <p style="color: #666; font-size: 0.9rem; margin-bottom: 2rem;">
                    –ü–æ–∫–∞–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 8 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                </p>
            </div>
            
            <div class="form-container">
                <h3 style="margin-bottom: 1rem;">üîÑ –û–±–Ω–æ–≤–∏—Ç—å SECRET_KEY</h3>
                <form method="post" action="/secret_scanner/admin/update-secret-key" 
                      onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –≤—ã—Ö–æ–¥–∏—Ç—å –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.')">
                    <div class="form-group">
                        <label for="secret_key">–ù–æ–≤—ã–π SECRET_KEY (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)</label>
                        <input type="text" id="secret_key" name="secret_key" 
                               placeholder="–ë—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º">
                        <div class="warning-text">
                            ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –ò–∑–º–µ–Ω–µ–Ω–∏–µ SECRET_KEY –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –≤—ã—Ö–æ–¥—É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —Å–∏—Å—Ç–µ–º—ã
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-warning">–û–±–Ω–æ–≤–∏—Ç—å SECRET_KEY</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- API Tokens Management Section -->
        <div class="section">
            <h2 class="section-title">
                <span>üîë</span>
                –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API —Ç–æ–∫–µ–Ω–∞–º–∏
            </h2>
            
            <!-- Collapsible Create Token Form -->
            <div class="collapsible-section">
                <div class="collapsible-header" onclick="toggleCollapsible('createTokenForm')">
                    <span>‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π API —Ç–æ–∫–µ–Ω</span>
                    <span class="chevron">‚ñº</span>
                </div>
                <div id="createTokenForm" class="collapsible-content">
                    <form method="post" action="/secret_scanner/admin/create-api-token">
                        <div class="form-section">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="api_name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–∫–æ–º–∞–Ω–¥–∞) *</label>
                                    <input type="text" id="api_name" name="name" required 
                                           placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: DevTeam1, QATeam, Frontend">
                                    <div class="help-text">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥</div>
                                </div>
                                <div class="form-group">
                                    <label for="expires_days">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–¥–Ω–µ–π)</label>
                                    <input type="number" id="expires_days" name="expires_days" value="365" min="0" max="3650">
                                    <div class="help-text">0 = –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h4>–õ–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤</h4>
                            <div class="rate-limits-grid">
                                <div class="form-group">
                                    <label for="requests_per_minute">–í –º–∏–Ω—É—Ç—É</label>
                                    <input type="number" id="requests_per_minute" name="requests_per_minute" value="10" min="1" max="200">
                                </div>
                                <div class="form-group">
                                    <label for="requests_per_hour">–í —á–∞—Å</label>
                                    <input type="number" id="requests_per_hour" name="requests_per_hour" value="50" min="1" max="500">
                                </div>
                                <div class="form-group">
                                    <label for="requests_per_day">–í –¥–µ–Ω—å</label>
                                    <input type="number" id="requests_per_day" name="requests_per_day" value="200" min="1" max="2000">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h4>–†–∞–∑—Ä–µ—à–µ–Ω–∏—è API</h4>
                            <div class="permissions-grid">
                                <div class="permission-item">
                                    <input type="checkbox" id="perm_project_add" name="perm_project_add" value="1" checked>
                                    <label for="perm_project_add">–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤</label>
                                </div>
                                <div class="permission-item">
                                    <input type="checkbox" id="perm_project_check" name="perm_project_check" value="1" checked>
                                    <label for="perm_project_check">–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ (exists)</label>
                                </div>
                                <div class="permission-item">
                                    <input type="checkbox" id="perm_scan" name="perm_scan" value="1" checked>
                                    <label for="perm_scan">–ó–∞–ø—É—Å–∫ —Å–∫–∞–Ω–æ–≤</label>
                                </div>
                                <div class="permission-item">
                                    <input type="checkbox" id="perm_multi_scan" name="perm_multi_scan" value="1" checked>
                                    <label for="perm_multi_scan">–ú—É–ª—å—Ç–∏-—Å–∫–∞–Ω—ã</label>
                                </div>
                                <div class="permission-item">
                                    <input type="checkbox" id="perm_scan_results" name="perm_scan_results" value="1">
                                    <label for="perm_scan_results">–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-success">–°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <div style="margin-top: 2rem;">
                <h3 style="margin-bottom: 1rem;">üìã –°–ø–∏—Å–æ–∫ API —Ç–æ–∫–µ–Ω–æ–≤</h3>
                <div style="margin-bottom: 1rem;">
                    <div class="form-group">
                        <label for="tokenSearch">–ü–æ–∏—Å–∫ API —Ç–æ–∫–µ–Ω–æ–≤</label>
                        <input type="text" id="tokenSearch" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞..." 
                            style="width: 100%; padding: 0.75rem; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem;"
                            oninput="searchTokens()">
                    </div>
                </div>
                <div class="loading" id="tokensLoading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤...</div>
                <table class="users-table tokens-table" id="tokensTable">
                    <thead>
                        <tr>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>–¢–æ–∫–µ–Ω</th>
                            <th>–°–æ–∑–¥–∞–Ω</th>
                            <th>–ò—Å—Ç–µ–∫–∞–µ—Ç</th>
                            <th>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–†–∞–∑—Ä–µ—à–µ–Ω–∏—è</th>
                            <th>–õ–∏–º–∏—Ç—ã</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="tokensTableBody">
                        <!-- Tokens will be loaded here -->
                    </tbody>
                </table>
                <!-- Pagination for API tokens -->
                <div id="tokensPagination" style="display: none; margin-top: 1rem; text-align: center;">
                <div style="display: flex; justify-content: center; align-items: center; gap: 0.5rem;">
                    <button type="button" class="btn btn-primary" id="prevTokensPage" onclick="changeTokensPage(-1)" style="padding: 0.5rem 1rem;">
                        ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è
                    </button>
                    <span id="tokensPageInfo" style="padding: 0 1rem; font-weight: 600;"></span>
                    <button type="button" class="btn btn-primary" id="nextTokensPage" onclick="changeTokensPage(1)" style="padding: 0.5rem 1rem;">
                        –°–ª–µ–¥—É—é—â–∞—è ‚Üí
                    </button>
                </div>
                <div id="tokensTotalInfo" style="margin-top: 0.5rem; color: #666; font-size: 0.9rem;"></div>
            </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">
                <span>üìÑ</span>
                –≠–∫—Å–ø–æ—Ä—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤
            </h2>
            
            <div class="form-container">
                <h3 style="margin-bottom: 1rem;">üì• –í—ã–≥—Ä—É–∑–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã</h3>
                <form id="exportForm">
                    <div class="form-group">
                        <label for="status_filter">–¢–∏–ø —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–ª—è –≤—ã–≥—Ä—É–∑–∫–∏</label>
                        <select id="status_filter" name="status_filter" style="width: 100%; padding: 0.75rem; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem;">
                            <option value="all">–í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã</option>
                            <option value="confirmed">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ</option>
                            <option value="refuted">–û–ø—Ä–æ–≤–µ—Ä–≥–Ω—É—Ç—ã–µ</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="exportBtn">
                            <span>üìÑ</span>
                            –ù–∞—á–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Export Progress -->
            <div id="exportProgress" style="display: none; margin-top: 1rem;">
                <div style="background: #f8f9fa; border-radius: 8px; padding: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                        <div class="spinner" style="width: 20px; height: 20px; border: 2px solid #e1e5e9; border-top: 2px solid #28a745; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                        <div class="checkmark" style="display: none; width: 20px; height: 20px; font-size: 20px; color: #28a745;">‚úÖ</div>
                        <span style="font-weight: 600;">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–∞...</span>
                    </div>
                    <div id="exportMessage" style="color: #666; margin-bottom: 1rem;">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
                    <div id="downloadSection" style="display: none;">
                        <button type="button" class="btn btn-success" id="downloadBtn">
                            <span>‚¨áÔ∏è</span>
                            –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
                        </button>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">
                    <span>üìä</span>
                    –≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏
                </h2>
                
                <div class="form-container">
                    <h3 style="margin-bottom: 1rem;">üìã –í—ã–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –ø–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º</h3>
                    <form id="exportProjectsForm">
                        <div class="form-group">
                            <label for="tech_filter">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞</label>
                            <div class="permissions-grid" style="margin-top: 0.5rem;">
                                <div class="permission-item">
                                    <input type="checkbox" id="tech_nestjs" name="tech_filter" value="nestjs" checked>
                                    <label for="tech_nestjs">NestJS</label>
                                </div>
                                <div class="permission-item">
                                    <input type="checkbox" id="tech_vue" name="tech_filter" value="vue" checked>
                                    <label for="tech_vue">Vue</label>
                                </div>
                                <div class="permission-item">
                                    <input type="checkbox" id="tech_angular" name="tech_filter" value="angular" checked>
                                    <label for="tech_angular">Angular</label>
                                </div>
                                <div class="permission-item">
                                    <input type="checkbox" id="tech_scala" name="tech_filter" value="scala" checked>
                                    <label for="tech_scala">Scala</label>
                                </div>
                                <div class="permission-item">
                                    <input type="checkbox" id="tech_dart" name="tech_filter" value="dart" checked>
                                    <label for="tech_dart">Dart</label>
                                </div>
                                <div class="permission-item">
                                    <input type="checkbox" id="tech_groovy" name="tech_filter" value="groovy" checked>
                                    <label for="tech_groovy">Groovy</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="exportProjectsBtn">
                                <span>üìä</span>
                                –ù–∞—á–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Export Progress for Projects -->
                <div id="exportProjectsProgress" style="display: none; margin-top: 1rem;">
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 1.5rem;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                            <div class="spinner" style="width: 20px; height: 20px; border: 2px solid #e1e5e9; border-top: 2px solid #28a745; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                            <div class="checkmark" style="display: none; width: 20px; height: 20px; font-size: 20px; color: #28a745;">‚úÖ</div>
                            <span style="font-weight: 600;">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ—Ç—á–µ—Ç–∞...</span>
                        </div>
                        <div id="exportProjectsMessage" style="color: #666; margin-bottom: 1rem;">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
                        <div id="downloadProjectsSection" style="display: none;">
                            <button type="button" class="btn btn-success" id="downloadProjectsBtn">
                                <span>‚¨áÔ∏è</span>
                                –°–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="/secret_scanner/static/js/admin.js"></script>
</body>
</html>